{"version":3,"file":"commonHelpers.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["import { gallery, loader, leanMoreButton } from \"../main\"\n\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nexport function clear() {\n    gallery.innerHTML = '';\n    hideLeanMore();\n}\n\nexport function unhideLoader() {\n    loader.style.display = 'inline-block';\n}\n\nexport function hideLoader() {\n    loader.style.display = 'none';\n}\n\nexport function unhideLeanMore() {\n    leanMoreButton.style.display = 'inline-block';\n}\nexport function hideLeanMore() {\n    leanMoreButton.style.display = 'none';\n}\n\nexport function galleryRender(photos) {\n    let innerHTML = '';\n    photos.hits.forEach(elem => {\n        innerHTML +=\n            `<div class=\"gallery-card\">\n            <a href=\"${elem.largeImageURL}\"><img src=\"${elem.webformatURL}\" width=\"360px\" alt=\"${elem.tags}\"></a>\n            <ul class=\"card-list\">\n                <li><p>Likes:</p><p>${elem.likes}</p></li>\n                <li><p>Views:</p><p>${elem.views}</p></li>\n                <li><p>Comments:</p><p>${elem.comments}</p></li>\n                <li><p>Downloads:</p><p>${elem.downloads}</p></li>\n            </ul>\n        </div>`;\n    });\n    gallery.innerHTML += innerHTML;\n    new SimpleLightbox('.gallery-card a', {\n        captionsData: 'alt',\n        captionDelay: 250,\n    }).refresh()\n}","import axios from \"axios\";\n\nexport async function request(searchValue, pageNum, countHits) {\n    return await axios.get(`https://pixabay.com/api/`, {\n        params: {\n            per_page: countHits,\n            page: pageNum,\n            key: '44001471-3db462177f0e91bc0a7989cfe',\n            q: searchValue,\n            image_type: 'photo',\n            orientation: 'horizontal',\n            safesearch: 'safe'\n        }\n    });\n}","import { hideLoader, unhideLoader, galleryRender, unhideLeanMore, hideLeanMore, clear } from \"./js/render-functions\";\nimport { request } from \"./js/pixabay-api\";\nimport iziToast from \"izitoast\";\n\nexport const gallery = document.querySelector('.gallery');\nexport const searchBar = document.querySelector('.search-bar');\nexport const searchInput = document.querySelector('.search-bar input');\nexport const loader = document.querySelector('.loader');\nexport const leanMoreButton = document.querySelector('.leanMore');\n\nexport const countHits = 15;\n\nlet countPages = 0;\nlet pageNumber = 1;\nlet searchValue = \"\";\n\nsearchBar.addEventListener('submit', async (e) => {\n    e.preventDefault();\n    if (searchInput.value == '' || searchInput.value == ' ') {\n        return;\n    }\n    clear();\n    unhideLoader();\n    searchValue = searchInput.value;\n    pageNumber = 1;\n\n    const photos = await request(searchValue, pageNumber, countHits)\n        .then(response => { return response.data })\n        .catch(error => console.log(error));\n    \n    pageNumber += 1;\n    \n    if (photos.hits.length == 0) {\n        iziToast.error({\n            position: \"topRight\",\n            message: \"Sorry, there are no images matching your search query. Please try again!\"\n        });\n        hideLoader();\n        e.target.reset();\n        return;\n    }\n\n\n    galleryRender(photos);\n\n    \n\n    hideLoader();\n\n    countPages = Math.ceil(photos.totalHits / countHits);\n\n    if (countPages < pageNumber) {\n        iziToast.info({\n            position: \"topRight\",\n            message: \"We're sorry, but you've reached the end of search results.\",\n        });\n        hideLeanMore();\n    }\n    else {\n        unhideLeanMore();\n    }\n\n    e.target.reset();\n});\n\nleanMoreButton.addEventListener('click', async e => {\n    unhideLoader();\n    hideLeanMore();\n\n    const photos = await request(searchValue, pageNumber, countHits)\n        .then(response => { return response.data })\n        .catch(error => console.log(error));\n    \n    pageNumber += 1;\n    \n    const galleryCardHeight = document.querySelector('.gallery-card').getBoundingClientRect().height;\n\n    galleryRender(photos);\n\n    window.scrollBy({\n        top: galleryCardHeight * 2,\n        behavior: 'smooth'\n    });\n\n    hideLoader();\n    if (countPages < pageNumber) {\n        iziToast.info({\n            position: \"topRight\",\n            message: \"We're sorry, but you've reached the end of search results.\",\n        });\n        hideLeanMore();\n    }\n    else {\n        unhideLeanMore();\n    }\n});"],"names":["clear","gallery","hideLeanMore","unhideLoader","loader","hideLoader","unhideLeanMore","leanMoreButton","galleryRender","photos","innerHTML","elem","SimpleLightbox","request","searchValue","pageNum","countHits","axios","searchBar","searchInput","countPages","pageNumber","e","response","error","iziToast","galleryCardHeight"],"mappings":"owBAQO,SAASA,GAAQ,CACpBC,EAAQ,UAAY,GACpBC,GACJ,CAEO,SAASC,GAAe,CAC3BC,EAAO,MAAM,QAAU,cAC3B,CAEO,SAASC,GAAa,CACzBD,EAAO,MAAM,QAAU,MAC3B,CAEO,SAASE,GAAiB,CAC7BC,EAAe,MAAM,QAAU,cACnC,CACO,SAASL,GAAe,CAC3BK,EAAe,MAAM,QAAU,MACnC,CAEO,SAASC,EAAcC,EAAQ,CAClC,IAAIC,EAAY,GAChBD,EAAO,KAAK,QAAQE,GAAQ,CACxBD,GACI;AAAA,uBACWC,EAAK,aAAa,eAAeA,EAAK,YAAY,wBAAwBA,EAAK,IAAI;AAAA;AAAA,sCAEpEA,EAAK,KAAK;AAAA,sCACVA,EAAK,KAAK;AAAA,yCACPA,EAAK,QAAQ;AAAA,0CACZA,EAAK,SAAS;AAAA;AAAA,eAGxD,CAAK,EACDV,EAAQ,WAAaS,EACrB,IAAIE,EAAe,kBAAmB,CAClC,aAAc,MACd,aAAc,GACjB,CAAA,EAAE,QAAS,CAChB,CC7CO,eAAeC,EAAQC,EAAaC,EAASC,EAAW,CAC3D,OAAO,MAAMC,EAAM,IAAI,2BAA4B,CAC/C,OAAQ,CACJ,SAAUD,EACV,KAAMD,EACN,IAAK,qCACL,EAAGD,EACH,WAAY,QACZ,YAAa,aACb,WAAY,MACf,CACT,CAAK,CACL,CCVO,MAAMb,EAAU,SAAS,cAAc,UAAU,EAC3CiB,EAAY,SAAS,cAAc,aAAa,EAChDC,EAAc,SAAS,cAAc,mBAAmB,EACxDf,EAAS,SAAS,cAAc,SAAS,EACzCG,EAAiB,SAAS,cAAc,WAAW,EAEnDS,EAAY,GAEzB,IAAII,EAAa,EACbC,EAAa,EACbP,EAAc,GAElBI,EAAU,iBAAiB,SAAU,MAAOI,GAAM,CAE9C,GADAA,EAAE,eAAc,EACZH,EAAY,OAAS,IAAMA,EAAY,OAAS,IAChD,OAEJnB,IACAG,IACAW,EAAcK,EAAY,MAC1BE,EAAa,EAEb,MAAMZ,EAAS,MAAMI,EAAQC,EAAaO,EAAYL,CAAS,EAC1D,KAAKO,GAAqBA,EAAS,IAAM,EACzC,MAAMC,GAAS,QAAQ,IAAIA,CAAK,CAAC,EAItC,GAFAH,GAAc,EAEVZ,EAAO,KAAK,QAAU,EAAG,CACzBgB,EAAS,MAAM,CACX,SAAU,WACV,QAAS,0EACrB,CAAS,EACDpB,IACAiB,EAAE,OAAO,QACT,MACH,CAGDd,EAAcC,CAAM,EAIpBJ,IAEAe,EAAa,KAAK,KAAKX,EAAO,UAAYO,CAAS,EAE/CI,EAAaC,GACbI,EAAS,KAAK,CACV,SAAU,WACV,QAAS,4DACrB,CAAS,EACDvB,KAGAI,IAGJgB,EAAE,OAAO,OACb,CAAC,EAEDf,EAAe,iBAAiB,QAAS,MAAMe,GAAK,CAChDnB,IACAD,IAEA,MAAMO,EAAS,MAAMI,EAAQC,EAAaO,EAAYL,CAAS,EAC1D,KAAKO,GAAqBA,EAAS,IAAM,EACzC,MAAMC,GAAS,QAAQ,IAAIA,CAAK,CAAC,EAEtCH,GAAc,EAEd,MAAMK,EAAoB,SAAS,cAAc,eAAe,EAAE,sBAAuB,EAAC,OAE1FlB,EAAcC,CAAM,EAEpB,OAAO,SAAS,CACZ,IAAKiB,EAAoB,EACzB,SAAU,QAClB,CAAK,EAEDrB,IACIe,EAAaC,GACbI,EAAS,KAAK,CACV,SAAU,WACV,QAAS,4DACrB,CAAS,EACDvB,KAGAI,GAER,CAAC"}